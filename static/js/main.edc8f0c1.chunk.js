(this["webpackJsonpwarframe-item-tracker"]=this["webpackJsonpwarframe-item-tracker"]||[]).push([[0],{173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},182:function(e,t,a){},184:function(e,t,a){},195:function(e,t,a){},196:function(e,t,a){},197:function(e,t,a){},298:function(e,t,a){"use strict";a.r(t);var n=a(3),i=a(1),s=a.n(i),r=a(152),c=a.n(r),u=(a(173),a(174),a(175),a(37)),l=a(11),o=a(19),h=a(20),d=a(23),m=a(22),j=(a(176),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsx)("div",{})}}]),a}(s.a.Component)),b=(a(177),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(n.jsxs)("ul",{className:"navbar-nav",children:[Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(u.c,{className:"nav-link",activeClassName:"text-danger",exact:!0,to:"/",children:"HOME"})}),Object(n.jsx)("li",{className:"nav-item",children:Object(n.jsx)(u.c,{className:"nav-link",activeClassName:"text-danger",to:"/watchlist",children:"WATCH LIST"})})]})})}}]),a}(s.a.Component)),f=(a(182),a(17)),v=a.n(f),g=a(39),p=a(38),x=(a(184),a.p+"static/media/search-icon.afde00ab.png"),O=a(154),k=a.n(O),y={},P=function(e){if(console.log(e),!e)return[];var t=e.trim().toLowerCase(),a=t.length;return 0===a?[]:y.filter((function(e){return e.name.toLowerCase().slice(0,a)===t})).slice(0,6)},N=function(e){return e.name},C=function(e){return Object(n.jsx)("div",{className:"suggestion",children:e.name})},I=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).updateQuery=function(t,a){var n=a.newValue;e.setState({query:n})},e.onSuggestionsFetchRequested=function(t){var a=t.value;e.setState({suggestions:P(a)})},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.state={value:"",enterPressed:!1,suggestions:[]},e.onChange=function(t,a){var n=a.newValue;n=n.replace("&","and"),e.setState({value:n})},e.updateQuery=e.updateQuery.bind(Object(p.a)(e)),e.handleKeyDown=e.handleKeyDown.bind(Object(p.a)(e)),e.retrieveAllItems(),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e,t){t.enterPressed!==this.state.enterPressed&&this.setState({enterPressed:!1})}},{key:"retrieveAllItems",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/items");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,y=a;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleKeyDown",value:function(e){13===(e.keyCode?e.keyCode:e.which)&&this.setState({enterPressed:!0})}},{key:"render",value:function(){var e=window.location.href.substring(30),t=this.state,a=t.value,i=t.enterPressed,s=t.suggestions;i&&a&&a!==e&&""!==a.trim()&&this.props.history.push("/items/"+a);var r={placeholder:"Search and Item",value:a,onChange:this.onChange};return Object(n.jsx)("div",{children:Object(n.jsxs)("div",{className:"jumbotron autosuggest-container",children:[Object(n.jsx)(k.a,{suggestions:s,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:N,renderSuggestion:C,inputProps:r}),Object(n.jsx)(u.b,{to:"/items/"+a,children:Object(n.jsx)("img",{src:x,height:"30",width:"30",alt:"Search Button"})})]})})}}]),a}(s.a.Component),w=Object(l.e)(I),D=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{className:"jumbotron",children:"Warframe Tracker"}),Object(n.jsx)(w,{})]})}}]),a}(s.a.Component),S=(a(195),a(109)),_=a.n(S),L=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).intervalID=0,e.state={items:[],itemsPerPage:5,offset:0,urgentOffset:0},e.updateData=e.updateData.bind(Object(p.a)(e)),e.removeItem=e.removeItem.bind(Object(p.a)(e)),e.handlePageClick=e.handlePageClick.bind(Object(p.a)(e)),e}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.updateData(),this.intervalID=setInterval(this.updateData,2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"handlePageClick",value:function(e,t){var a=e.selected,n=Math.ceil(a*this.state.itemsPerPage);t?this.setState({urgentOffset:n}):this.setState({offset:n})}},{key:"updateData",value:function(){var e=Object(g.a)(v.a.mark((function e(){var t,a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/watchlist/list");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({items:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/watchlist/remove/"+t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.items,i=t.itemsPerPage,s=t.offset,r=t.urgentOffset,c=Math.ceil(a.length/i),u=a.filter((function(e){return e.is_urgent})),l=Math.ceil(u.length/i);return Object(n.jsxs)("div",{className:"container text-center mt-5",children:[Object(n.jsx)("h2",{className:"header",children:"Urgent Items:"}),Object(n.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Average Price"}),Object(n.jsx)("th",{children:"Min. Price"}),Object(n.jsx)("th",{children:"Max. Price"}),Object(n.jsx)("th",{})]})}),Object(n.jsx)("tbody",{children:u.slice(r,r+i).map((function(t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t.name}),Object(n.jsx)("td",{children:t.avg_price}),Object(n.jsx)("td",{children:t.min_price}),Object(n.jsx)("td",{children:t.max_price}),Object(n.jsx)("td",{children:Object(n.jsx)("p",{onClick:function(){return e.removeItem(t.item_id)},children:"X"})})]},t.item_id)}))})]}),Object(n.jsx)(_.a,{previousLabel:"Prev",nextLabel:"Next",breakLabel:"...",breakClassName:"PaginationBreak",pageCount:l,marginPagesDisplayed:1,pageRangeDisplayed:5,onPageChange:function(t){e.handlePageClick(t,!0)},containerClassName:"Pagination",subContainerClassName:"PaginationPages Pagination",activeClassName:"PaginationActive"}),Object(n.jsx)("h2",{className:"header",children:"Watched Items:"}),Object(n.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(n.jsx)("thead",{className:"thead-dark",children:Object(n.jsxs)("tr",{children:[Object(n.jsx)("th",{children:"Name"}),Object(n.jsx)("th",{children:"Average Price"}),Object(n.jsx)("th",{children:"Min. Price"}),Object(n.jsx)("th",{children:"Max. Price"}),Object(n.jsx)("th",{})]})}),Object(n.jsx)("tbody",{children:a.slice(s,s+i).map((function(t){return Object(n.jsxs)("tr",{children:[Object(n.jsx)("td",{children:t.name}),Object(n.jsx)("td",{children:t.avg_price}),Object(n.jsx)("td",{children:t.min_price}),Object(n.jsx)("td",{children:t.max_price}),Object(n.jsx)("td",{children:Object(n.jsx)("p",{onClick:function(){return e.removeItem(t.item_id)},children:"X"})})]},t.item_id)}))})]}),Object(n.jsx)(_.a,{previousLabel:"Prev",nextLabel:"Next",breakLabel:"...",breakClassName:"PaginationBreak",pageCount:c,marginPagesDisplayed:1,pageRangeDisplayed:5,onPageChange:function(t){e.handlePageClick(t,!1)},containerClassName:"Pagination",subContainerClassName:"PaginationPages Pagination",activeClassName:"PaginationActive"})]})}}]),a}(s.a.Component),M=(a(196),a(306)),A=a(304),T=(a(197),function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props.data;return Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{children:Object(n.jsx)("strong",{children:e.title})}),Object(n.jsx)("ul",{children:e.data.map((function(e,t){return Object(n.jsx)("li",{children:e},e+t)}))})]})}}]),a}(s.a.Component)),R=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).intervalID=0,e.state={successfulAPICall:!1,waiting:!0,isSingleItem:!0,item:{},itemsInSet:[],tradingTax:0,ducats:0,relics:[],imgUrl:"",itemName:"",itemId:""},e}return Object(h.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.match.params.itemName!==e.match.params.itemName&&(this.setState({waiting:!0}),clearInterval(this.intervalID))}},{key:"componentDidUpdate",value:function(e){if(e.match.params.itemName!==this.props.match.params.itemName){var t=this.props.match.params.itemName,a=e.match.params.itemName.trim().toLowerCase().split(" ").join("_");fetch("/api/items/untrack/"+a),this.retrieveData(t)}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.itemName;this.retrieveData(t),this.intervalID=setInterval((function(){e.retrieveData(t)}),2e3)}},{key:"componentWillUnmount",value:function(){var e=this.props.match.params.itemName.trim().toLowerCase().split(" ").join("_");fetch("/api/items/untrack/"+e),clearInterval(this.intervalID)}},{key:"retrieveData",value:function(){var e=Object(g.a)(v.a.mark((function e(t){var a,n,i,s,r,c,u,l,o,h,d,m,j,b;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.trim().toLowerCase().split(" ").join("_"),n=!1,i=!0,s="/api/items/"+a,e.next=6,fetch(s);case 6:return r=e.sent,e.next=9,r.json();case 9:if(void 0!==(c=(c=e.sent).shift())){e.next=14;break}return this.setState({successfulAPICall:!1,waiting:!1}),e.abrupt("return");case 14:return a.endsWith("_set")||a.includes("lith_")||a.includes("meso_")||a.includes("neo_")||a.includes("axi_")||(n=!0),u=this.getAvgPrice(c),l=this.getMinPrice(c),o=this.getMaxPrice(c),h=this.getImage(c),d=this.getRelics(c),m=this.getTradingTax(c),j=this.getDucats(c),t=this.getItemName(c),e.next=25,Promise.all(c.items_in_set.map(function(){var e=Object(g.a)(v.a.mark((function e(t){var a,n,i,s;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/items/"+t,e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return i=e.sent,s=i.shift(),e.abrupt("return",{url:s.item_id,img:s.img_url});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 25:b=e.sent,this.setState({item:c,waiting:!1,itemsInSet:b,successfulAPICall:i,tradingTax:m,ducats:j,relics:d,imgUrl:h,isSingleItem:n,itemName:t,itemId:a,avgPrice:u,minPrice:l,maxPrice:o});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAvgPrice",value:function(e){return e.avg_price}},{key:"getMinPrice",value:function(e){return e.min_price}},{key:"getMaxPrice",value:function(e){return e.max_price}},{key:"getItemName",value:function(e){return e.name}},{key:"getImage",value:function(e){return e.img_url}},{key:"getRelics",value:function(e){return e.relics}},{key:"getTradingTax",value:function(e){return e.trading_tax}},{key:"getDucats",value:function(e){return e.ducats}},{key:"addItem",value:function(){var e=Object(g.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/watchlist/add/"+t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!0===this.state.waiting)return Object(n.jsxs)("div",{className:"container h1 text-center mt-5",children:[Object(n.jsx)("h3",{className:"text-info loading",children:"Loading..."}),Object(n.jsx)("div",{id:"loading-bar",children:Object(n.jsx)("div",{id:"progress"})})]});if(!1===this.state.successfulAPICall)return Object(n.jsxs)("div",{className:"container text-center mt-5",children:[Object(n.jsx)("p",{className:"h1 text-danger",children:"We could not find the item you requested."}),Object(n.jsx)(w,{})]});var t=[];this.state.item.order_history.forEach((function(e,a){t.push({x:a+1,y:e.platinum})}));var a={title:"Prices:",data:["Average Price: "+this.state.avgPrice,"Min Price: "+this.state.minPrice,"Max Price: "+this.state.maxPrice]},i={title:"Ducats:",data:[this.state.ducats]},s={title:"Trading Tax:",data:[this.state.tradingTax]},r=[];this.state.relics.forEach((function(e){r.push(e.name)}));var c={title:"Aquisition:",data:r};return Object(n.jsxs)("div",{className:"ItemInfoContainer",children:[Object(n.jsx)(w,{}),Object(n.jsx)("h2",{className:"ItemName",children:this.state.itemName}),Object(n.jsx)("img",{className:"ItemImage",src:this.state.imgUrl,alt:"Item"}),Object(n.jsx)("div",{className:"ItemsInSet row w-50 justify-content-around",children:this.state.itemsInSet.map((function(e){return Object(n.jsx)(u.b,{className:"SetItemLink",to:"/items/"+e.url,children:Object(n.jsx)("img",{width:"64",height:"64",src:e.img,alt:"Item in set"})})}))}),Object(n.jsx)("button",{className:"btn btn-info",onClick:function(){return e.addItem(e.state.itemId)},children:"Add Item to Watch List"}),this.state.successfulAPICall&&Object(n.jsxs)("div",{className:"container data-container",children:[this.state.ducats>-1&&Object(n.jsx)(T,{data:i}),Object(n.jsx)(T,{data:a}),this.state.tradingTax>-1&&Object(n.jsx)(T,{data:s}),this.state.relics.length>0&&Object(n.jsx)(T,{data:c})]}),t.length>1&&Object(n.jsx)("div",{className:"VictoryLineContainer",children:Object(n.jsx)(M.a,{children:Object(n.jsx)(A.a,{style:{data:{fill:"#c43a31",fillOpacity:.7,stroke:"#c43a31",strokeWidth:3},labels:{fontSize:15,fill:function(e){return 3===e.datum.x?"#000000":"#c43a31"}}},data:t,labels:function(e){var t=e.datum;return t.x%2===0?t.y:""}})})})]})}}]),a}(s.a.Component);var W=function(){return Object(n.jsxs)(u.a,{children:[Object(n.jsx)(b,{}),Object(n.jsx)(l.a,{exact:!0,path:"/",component:D}),Object(n.jsx)(l.a,{path:"/watchlist",component:L}),Object(n.jsx)(l.a,{path:"/items/:itemName",component:R}),Object(n.jsx)(j,{})]})},q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,311)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),s(e),r(e)}))};c.a.render(Object(n.jsx)(s.a.StrictMode,{children:Object(n.jsx)(W,{})}),document.getElementById("root")),q()}},[[298,1,2]]]);
//# sourceMappingURL=main.edc8f0c1.chunk.js.map