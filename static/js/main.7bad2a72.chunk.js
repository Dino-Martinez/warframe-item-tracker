(this["webpackJsonpwarframe-item-tracker"]=this["webpackJsonpwarframe-item-tracker"]||[]).push([[0],{175:function(e,t,a){},176:function(e,t,a){},177:function(e,t,a){},178:function(e,t,a){},180:function(e,t,a){},185:function(e,t,a){},187:function(e,t,a){},198:function(e,t,a){},199:function(e,t,a){},200:function(e,t,a){},303:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(153),r=a.n(s),c=(a(175),a(176),a(177),a(37)),u=a(11),l=a(19),o=a(20),h=a(21),d=a(23),m=(a(178),a(3)),j=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(m.jsx)("div",{})}}]),a}(i.a.Component),b=(a(180),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(m.jsx)("nav",{className:"navbar navbar-dark bg-dark",children:Object(m.jsxs)("ul",{className:"navbar-nav",children:[Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(c.c,{className:"nav-link",activeClassName:"text-danger",exact:!0,to:"/",children:"HOME"})}),Object(m.jsx)("li",{className:"nav-item",children:Object(m.jsx)(c.c,{className:"nav-link",activeClassName:"text-danger",to:"/watchlist",children:"WATCH LIST"})})]})})}}]),a}(i.a.Component)),f=(a(185),a(17)),g=a.n(f),v=a(39),p=a(38),x=(a(187),a.p+"static/media/search-icon.afde00ab.png"),O=a(157),k=a.n(O),y={},P=function(e){if(console.log(e),!e)return[];var t=e.trim().toLowerCase(),a=t.length;return 0===a?[]:y.filter((function(e){return e.name.toLowerCase().slice(0,a)===t})).slice(0,6)},N=function(e){return e.name},C=function(e){return Object(m.jsx)("div",{className:"suggestion",children:e.name})},I=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).updateQuery=function(t,a){var n=a.newValue;e.setState({query:n})},e.onSuggestionsFetchRequested=function(t){var a=t.value;e.setState({suggestions:P(a)})},e.onSuggestionsClearRequested=function(){e.setState({suggestions:[]})},e.state={value:"",enterPressed:!1,suggestions:[]},e.onChange=function(t,a){var n=a.newValue;n=n.replace("&","and"),e.setState({value:n})},e.updateQuery=e.updateQuery.bind(Object(p.a)(e)),e.handleKeyDown=e.handleKeyDown.bind(Object(p.a)(e)),e.retrieveAllItems(),e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(e,t){t.enterPressed!==this.state.enterPressed&&this.setState({enterPressed:!1})}},{key:"retrieveAllItems",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/items");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,y=a;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleKeyDown",value:function(e){13===(e.keyCode?e.keyCode:e.which)&&this.setState({enterPressed:!0})}},{key:"render",value:function(){var e=window.location.href.substring(30),t=this.state,a=t.value,n=t.enterPressed,i=t.suggestions;n&&a&&a!==e&&""!==a.trim()&&this.props.history.push("/items/"+a);var s={placeholder:"Search and Item",value:a,onChange:this.onChange};return Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:"jumbotron autosuggest-container",children:[Object(m.jsx)(k.a,{suggestions:i,onSuggestionsFetchRequested:this.onSuggestionsFetchRequested,onSuggestionsClearRequested:this.onSuggestionsClearRequested,getSuggestionValue:N,renderSuggestion:C,inputProps:s}),Object(m.jsx)(c.b,{to:"/items/"+a,children:Object(m.jsx)("img",{src:x,height:"30",width:"30",alt:"Search Button"})})]})})}}]),a}(i.a.Component),w=Object(u.e)(I),D=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{className:"jumbotron",children:"Warframe Tracker"}),Object(m.jsx)(w,{})]})}}]),a}(i.a.Component),S=(a(198),a(110)),_=a.n(S),L=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={items:[],itemsPerPage:5,offset:0,urgentOffset:0},e.updateData=e.updateData.bind(Object(p.a)(e)),e.removeItem=e.removeItem.bind(Object(p.a)(e)),e.handlePageClick=e.handlePageClick.bind(Object(p.a)(e)),e.intervalID=0,e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.updateData(),this.intervalID=setInterval(this.updateData,2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"handlePageClick",value:function(e,t){var a=e.selected,n=Math.ceil(a*this.state.itemsPerPage);t?this.setState({urgentOffset:n}):this.setState({offset:n})}},{key:"updateData",value:function(){var e=Object(v.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/watchlist/list");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,this.setState({items:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"removeItem",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/watchlist/remove/"+t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,a=t.items,n=t.itemsPerPage,i=t.offset,s=t.urgentOffset,r=Math.ceil(a.length/n),c=a.filter((function(e){return e.is_urgent})),u=Math.ceil(c.length/n);return Object(m.jsxs)("div",{className:"container text-center mt-5",children:[Object(m.jsx)("h2",{className:"header",children:"Urgent Items:"}),Object(m.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(m.jsx)("thead",{className:"thead-dark",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Name"}),Object(m.jsx)("th",{children:"Average Price"}),Object(m.jsx)("th",{children:"Min. Price"}),Object(m.jsx)("th",{children:"Max. Price"}),Object(m.jsx)("th",{})]})}),Object(m.jsx)("tbody",{children:c.slice(s,s+n).map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:t.avg_price}),Object(m.jsx)("td",{children:t.min_price}),Object(m.jsx)("td",{children:t.max_price}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{onClick:function(){return e.removeItem(t.item_id)},children:"X"})})]},t.item_id)}))})]}),Object(m.jsx)(_.a,{previousLabel:"Prev",nextLabel:"Next",breakLabel:"...",breakClassName:"PaginationBreak",pageCount:u,marginPagesDisplayed:1,pageRangeDisplayed:5,onPageChange:function(t){e.handlePageClick(t,!0)},containerClassName:"Pagination",subContainerClassName:"PaginationPages Pagination",activeClassName:"PaginationActive"}),Object(m.jsx)("h2",{className:"header",children:"Watched Items:"}),Object(m.jsxs)("table",{className:"table table-bordered table-striped",children:[Object(m.jsx)("thead",{className:"thead-dark",children:Object(m.jsxs)("tr",{children:[Object(m.jsx)("th",{children:"Name"}),Object(m.jsx)("th",{children:"Average Price"}),Object(m.jsx)("th",{children:"Min. Price"}),Object(m.jsx)("th",{children:"Max. Price"}),Object(m.jsx)("th",{})]})}),Object(m.jsx)("tbody",{children:a.slice(i,i+n).map((function(t){return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:t.name}),Object(m.jsx)("td",{children:t.avg_price}),Object(m.jsx)("td",{children:t.min_price}),Object(m.jsx)("td",{children:t.max_price}),Object(m.jsx)("td",{children:Object(m.jsx)("p",{onClick:function(){return e.removeItem(t.item_id)},children:"X"})})]},t.item_id)}))})]}),Object(m.jsx)(_.a,{previousLabel:"Prev",nextLabel:"Next",breakLabel:"...",breakClassName:"PaginationBreak",pageCount:r,marginPagesDisplayed:1,pageRangeDisplayed:5,onPageChange:function(t){e.handlePageClick(t,!1)},containerClassName:"Pagination",subContainerClassName:"PaginationPages Pagination",activeClassName:"PaginationActive"})]})}}]),a}(i.a.Component),M=(a(199),a(311)),A=a(309),T=(a(200),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=this.props.data;return Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{children:Object(m.jsx)("strong",{children:e.title})}),Object(m.jsx)("ul",{children:e.data.map((function(e,t){return Object(m.jsx)("li",{children:e},e+t)}))})]})}}]),a}(i.a.Component)),R=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).state={successfulAPICall:!1,waiting:!0,isSingleItem:!0,item:{},itemsInSet:[],tradingTax:0,ducats:0,relics:[],imgUrl:"",itemName:"",itemId:""},e.intervalID=0,e}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(e){this.props.match.params.itemName!==e.match.params.itemName&&(this.setState({waiting:!0}),clearInterval(this.intervalID))}},{key:"componentDidUpdate",value:function(e){if(e.match.params.itemName!==this.props.match.params.itemName){var t=this.props.match.params.itemName,a=e.match.params.itemName.trim().toLowerCase().split(" ").join("_");fetch("/api/items/untrack/"+a),this.retrieveData(t)}}},{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.itemName;this.retrieveData(t),this.intervalID=setInterval((function(){e.retrieveData(t)}),2e3)}},{key:"componentWillUnmount",value:function(){var e=this.props.match.params.itemName.trim().toLowerCase().split(" ").join("_");fetch("/api/items/untrack/"+e),clearInterval(this.intervalID)}},{key:"retrieveData",value:function(){var e=Object(v.a)(g.a.mark((function e(t){var a,n,i,s,r,c,u,l,o,h,d,m,j,b;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.trim().toLowerCase().split(" ").join("_"),n=!1,i=!0,s="/api/items/"+a,e.next=6,fetch(s);case 6:return r=e.sent,e.next=9,r.json();case 9:if(c=e.sent,console.log(c),void 0!==c){e.next=14;break}return this.setState({successfulAPICall:!1,waiting:!1}),e.abrupt("return");case 14:return a.endsWith("_set")||a.includes("lith_")||a.includes("meso_")||a.includes("neo_")||a.includes("axi_")||(n=!0),u=this.getAvgPrice(c),l=this.getMinPrice(c),o=this.getMaxPrice(c),h=this.getImage(c),d=this.getRelics(c),m=this.getTradingTax(c),j=this.getDucats(c),t=this.getItemName(c),e.next=25,Promise.all(c.items_in_set.map(function(){var e=Object(v.a)(g.a.mark((function e(t){var a,n,i,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/items/"+t,e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return i=e.sent,s=i,console.log(s),e.abrupt("return",{url:s.item_id,img:s.img_url});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 25:b=e.sent,this.setState({item:c,waiting:!1,itemsInSet:b,successfulAPICall:i,tradingTax:m,ducats:j,relics:d,imgUrl:h,isSingleItem:n,itemName:t,itemId:a,avgPrice:u,minPrice:l,maxPrice:o});case 27:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAvgPrice",value:function(e){return e.avg_price}},{key:"getMinPrice",value:function(e){return e.min_price}},{key:"getMaxPrice",value:function(e){return e.max_price}},{key:"getItemName",value:function(e){return e.name}},{key:"getImage",value:function(e){return e.img_url}},{key:"getRelics",value:function(e){return e.relics}},{key:"getTradingTax",value:function(e){return e.trading_tax}},{key:"getDucats",value:function(e){return e.ducats}},{key:"addItem",value:function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/watchlist/add/"+t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;if(!0===this.state.waiting)return Object(m.jsxs)("div",{className:"container h1 text-center mt-5",children:[Object(m.jsx)("h3",{className:"text-info loading",children:"Loading..."}),Object(m.jsx)("div",{id:"loading-bar",children:Object(m.jsx)("div",{id:"progress"})})]});if(!1===this.state.successfulAPICall)return Object(m.jsxs)("div",{className:"container text-center mt-5",children:[Object(m.jsx)("p",{className:"h1 text-danger",children:"We could not find the item you requested."}),Object(m.jsx)(w,{})]});var t=[];this.state.item.order_history.forEach((function(e,a){t.push({x:a+1,y:e.platinum})}));var a={title:"Prices:",data:["Average Price: "+this.state.avgPrice,"Min Price: "+this.state.minPrice,"Max Price: "+this.state.maxPrice]},n={title:"Ducats:",data:[this.state.ducats]},i={title:"Trading Tax:",data:[this.state.tradingTax]},s=[];this.state.relics.forEach((function(e){s.push(e.name)}));var r={title:"Aquisition:",data:s};return Object(m.jsxs)("div",{className:"ItemInfoContainer",children:[Object(m.jsx)(w,{}),Object(m.jsx)("h2",{className:"ItemName",children:this.state.itemName}),Object(m.jsx)("img",{className:"ItemImage",src:this.state.imgUrl,alt:"Item"}),Object(m.jsx)("div",{className:"ItemsInSet row w-50 justify-content-around",children:this.state.itemsInSet.map((function(e){return Object(m.jsx)(c.b,{className:"SetItemLink",to:"/items/"+e.url,children:Object(m.jsx)("img",{width:"64",height:"64",src:e.img,alt:"Item in set"})})}))}),Object(m.jsx)("button",{className:"btn btn-info",onClick:function(){return e.addItem(e.state.itemId)},children:"Add Item to Watch List"}),this.state.successfulAPICall&&Object(m.jsxs)("div",{className:"container data-container",children:[this.state.ducats>-1&&Object(m.jsx)(T,{data:n}),Object(m.jsx)(T,{data:a}),this.state.tradingTax>-1&&Object(m.jsx)(T,{data:i}),this.state.relics.length>0&&Object(m.jsx)(T,{data:r})]}),t.length>1&&Object(m.jsx)("div",{className:"VictoryLineContainer",children:Object(m.jsx)(M.a,{children:Object(m.jsx)(A.a,{style:{data:{fill:"#c43a31",fillOpacity:.7,stroke:"#c43a31",strokeWidth:3},labels:{fontSize:15,fill:function(e){return 3===e.datum.x?"#000000":"#c43a31"}}},data:t,labels:function(e){var t=e.datum;return t.x%2===0?t.y:""}})})})]})}}]),a}(i.a.Component);var W=function(){return Object(m.jsxs)(c.a,{children:[Object(m.jsx)(b,{}),Object(m.jsx)(u.a,{exact:!0,path:"/",component:D}),Object(m.jsx)(u.a,{path:"/watchlist",component:L}),Object(m.jsx)(u.a,{path:"/items/:itemName",component:R}),Object(m.jsx)(j,{})]})},q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,316)).then((function(t){var a=t.getCLS,n=t.getFID,i=t.getFCP,s=t.getLCP,r=t.getTTFB;a(e),n(e),i(e),s(e),r(e)}))};r.a.render(Object(m.jsx)(i.a.StrictMode,{children:Object(m.jsx)(W,{})}),document.getElementById("root")),q()}},[[303,1,2]]]);
//# sourceMappingURL=main.7bad2a72.chunk.js.map